"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const k=require("react"),w=require("@square/web-sdk"),P=require("../../components/error-screen/error-screen.cjs.js"),S=require("../../hooks/use-dynamic-callback.cjs.js");function g(e){if(e&&e.__esModule)return e;const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>e[o]})}}return t.default=e,Object.freeze(t)}const n=g(k),l=n.createContext({cardTokenizeResponseReceived:null,createPaymentRequest:null,payments:null});function j({applicationId:e,locationId:t,children:o,overrides:a,...c}){const[s,d]=n.useState(),[f]=n.useState(()=>c.createPaymentRequest?.());n.useEffect(()=>{const r=new AbortController,{signal:u}=r;async function R(v){await w.payments(e,t,a).then(i=>{if(i===null)throw new Error("Square Web Payments SDK failed to load");if(!v?.aborted)return d(i),i})}return e&&t&&R(u),()=>{r.abort()}},[e,t]);const m=async r=>{if(r.errors||!c.createVerificationDetails){await c.cardTokenizeResponseReceived(r);return}const u=await s?.verifyBuyer(String(r.token),c.createVerificationDetails());await c.cardTokenizeResponseReceived(r,u)},y=S.useDynamicCallback(m);if(!e||!t)return n.createElement(P.default,null);if(!s)return null;const b={cardTokenizeResponseReceived:y,createPaymentRequest:f,payments:s};return n.createElement(l.Provider,{value:b},o)}const q=()=>{const e=n.useContext(l);if(e===void 0)throw new Error("useForm must be used within a FormProvider");return e};exports.FormContext=l;exports.default=j;exports.useForm=q;
//# sourceMappingURL=form.cjs.js.map
